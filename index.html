<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<title>石头最省计算器</title>

<style>
  body {
    margin: 0;
    padding: 20px;
    background: radial-gradient(circle at top, #1c2238, #0a0f1e);
    color: #e6d9b8;
    font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", sans-serif;
  }

  .card {
    max-width: 420px;
    margin: auto;
    padding: 24px;
    border-radius: 16px;
    background: rgba(20, 28, 50, 0.92);
    box-shadow: 0 0 24px rgba(255, 215, 130, 0.2);
  }

  h1 {
    margin-top: 0;
    text-align: center;
    color: #ffd77a;
    font-size: 22px;
  }

  .field {
    margin-top: 18px;
  }

  .field label {
    display: block;
    margin-bottom: 6px;
    font-size: 14px;
    color: #c9b98b;
  }

  input {
    width: 100%;
    box-sizing: border-box;
    padding: 10px;
    font-size: 16px; /* ⚠️ iOS 必须 ≥16px */
    border-radius: 8px;
    border: none;
    background: #0f162d;
    color: #ffffff;
    -webkit-appearance: none;
    appearance: none;
  }

  .result {
    margin-top: 24px;
    padding: 14px;
    border-radius: 10px;
    background: rgba(255, 215, 130, 0.08);
    font-size: 15px;
  }

  .gold {
    color: #ffd77a;
    font-weight: bold;
  }

  .hint {
    margin-top: 20px;
    font-size: 12px;
    color: #9fa8c7;
    text-align: center;
  }
</style>
</head>

<body>
  <div class="card">
    <h1>石头最省计算器</h1>

    <div class="field">
      <label>目标石头数量</label>
      <input
        id="target"
        type="number"
        inputmode="numeric"
        placeholder="例如：100"
        autocomplete="off"
        autocorrect="off"
        autocapitalize="off"
      />
    </div>

    <div class="field">
      <label>碎片价格（10 个）</label>
      <input
        id="fragmentPrice"
        type="number"
        inputmode="decimal"
        placeholder="例如：247"
        autocomplete="off"
        autocorrect="off"
        autocapitalize="off"
      />
    </div>

    <div class="field">
      <label>石头价格（10 个）</label>
      <input
        id="stonePrice"
        type="number"
        inputmode="decimal"
        placeholder="例如：52"
        autocomplete="off"
        autocorrect="off"
        autocapitalize="off"
      />
    </div>

    <div class="result" id="result">
      请输入数据开始计算
    </div>

    <div class="hint">
      杖剑传说玩家专用 · 移动端稳态输入版
    </div>
  </div>

<script>
  const targetInput = document.getElementById('target')
  const fragmentInput = document.getElementById('fragmentPrice')
  const stoneInput = document.getElementById('stonePrice')
  const resultBox = document.getElementById('result')

  let timer = null

  function scheduleCalc() {
    clearTimeout(timer)
    timer = setTimeout(calculate, 300)
  }

  targetInput.addEventListener('input', scheduleCalc)
  fragmentInput.addEventListener('input', scheduleCalc)
  stoneInput.addEventListener('input', scheduleCalc)

  function calculate() {
    const target = Number(targetInput.value)
    const fragment10 = Number(fragmentInput.value)
    const stone10 = Number(stoneInput.value)

    if (!target || !fragment10 || !stone10) {
      resultBox.innerText = '请输入完整数据'
      return
    }

    const stoneUnit = stone10 / 10
    const fragmentUnitToStone = (fragment10 / 10) / 2

    const costStone = target * stoneUnit
    const costFragment = target * fragmentUnitToStone

    if (costStone <= costFragment) {
      resultBox.innerHTML =
        `推荐方案：<span class="gold">直接买石头</span><br>预计花费 ${costStone.toFixed(2)} 元`
    } else {
      resultBox.innerHTML =
        `推荐方案：<span class="gold">买碎片合成</span><br>预计花费 ${costFragment.toFixed(2)} 元`
    }
  }
</script>
</body>
</html>